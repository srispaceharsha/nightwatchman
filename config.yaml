# Detection Parameters
detection:
  persistence_duration: 3          # seconds to confirm sitting before alert
  cooldown_duration: 15           # seconds (5 minutes) post-alert suppression
  confidence_threshold: 0.7        # minimum pose detection confidence

  # Angle thresholds (degrees)
  sitting_angle_min: 70
  sitting_angle_max: 115
  propped_angle_min: 30
  propped_angle_max: 60
  lying_angle_ranges:
    - [-20, 20]
    - [160, 200]

  # Vertical difference thresholds (normalized 0-1 coordinates)
  sitting_vertical_diff: 0.15
  propped_vertical_diff: 0.08

  # Hysteresis - extra tolerance when already in a state
  hysteresis_angle_buffer: 10      # degrees of extra tolerance
  hysteresis_vdiff_buffer: 0.05    # extra vertical diff tolerance

# Camera
camera:
  device_id: 0                     # 0 = default webcam
  resolution_width: 640
  resolution_height: 480
  frame_rate: 30                   # Camera capture rate (hardware setting)
  processing_fps: 5                # Frames processed per second (lower = less CPU)

# Display
display:
  show_camera_window: true         # Show OpenCV window with camera feed and skeleton

# Gesture Controls
gestures:
  min_detection_confidence: 0.4    # Minimum confidence for hand detection
  min_tracking_confidence: 0.4     # Minimum confidence for hand tracking
  thumbs_up_hold_duration: 2.0     # Seconds to hold thumbs up before triggering
  thumbs_down_hold_duration: 2.0   # Seconds to hold thumbs down before pausing
  gesture_loss_grace_seconds: 0.4  # Grace period when gesture briefly lost

# Logging
logging:
  log_file: logs/state_transitions.log
  log_to_file: true
  log_to_terminal: true

# MQTT Integration (Home Assistant)
mqtt:
  enabled: true
  broker: "localhost"           # MQTT broker address (localhost if on same Pi)
  port: 1883
  username: "nightwatchman"     # MQTT username
  password: "nightwatch123"     # MQTT password (change this!)
  topics:
    state: "nightwatchman/state"       # System state (WAITING_FOR_START, ACTIVE_MONITORING, PAUSED)
    posture: "nightwatchman/posture"   # Posture state (MONITORING_LYING, SITTING_DETECTED, etc.)
    alert: "nightwatchman/alert"       # Alert events (PERSON_SITTING_UP)
    stats: "nightwatchman/stats"       # Statistics (alert_count, uptime, etc.)
    command: "nightwatchman/command"   # Commands from HA (start, stop, pause, resume)

# HTTP Server (Video Streaming)
http:
  enabled: true
  host: "0.0.0.0"               # Listen on all interfaces
  port: 5000                    # HTTP server port
  stream_fps: 5                 # Video stream frame rate (lower = less bandwidth)
  stream_width: 320             # Video stream width in pixels
  stream_height: 240            # Video stream height in pixels
